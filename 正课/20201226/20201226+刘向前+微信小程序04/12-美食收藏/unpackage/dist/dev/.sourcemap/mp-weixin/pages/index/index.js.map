{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/lxq/Desktop/re-study-web/正课/20201226/20201226+刘向前+微信小程序04/12-美食收藏/pages/index/index.vue?1b93","webpack:///C:/Users/lxq/Desktop/re-study-web/正课/20201226/20201226+刘向前+微信小程序04/12-美食收藏/pages/index/index.vue?0807","webpack:///C:/Users/lxq/Desktop/re-study-web/正课/20201226/20201226+刘向前+微信小程序04/12-美食收藏/pages/index/index.vue?e51c","webpack:///C:/Users/lxq/Desktop/re-study-web/正课/20201226/20201226+刘向前+微信小程序04/12-美食收藏/pages/index/index.vue?d203","uni-app:///pages/index/index.vue","webpack:///C:/Users/lxq/Desktop/re-study-web/正课/20201226/20201226+刘向前+微信小程序04/12-美食收藏/pages/index/index.vue?89f7","webpack:///C:/Users/lxq/Desktop/re-study-web/正课/20201226/20201226+刘向前+微信小程序04/12-美食收藏/pages/index/index.vue?3db4"],"names":["createPage","Page"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<!-- 地区选择和个人中心 -->\r\n\t\t<view class=\"title_content\">\r\n\t\t\t<!-- 点击跳转城市页city?address\r\n\t\t\t\t\taddress 当前的城市位置 \r\n\t\t\t -->\r\n\t\t\t<navigator class=\"area_name\" url=\"../city/city\">\r\n\t\t\t\t{{address}}\r\n\t\t\t</navigator>\r\n\t\t\t<image class=\"downIcon\" src=\"/static/images/down.png\" /> \r\n\t\t\t<!-- 点击跳转用户中心页 personal -->\r\n\t\t\t<navigator class=\"people\" url=\"/pages/personal/personal\">\r\n\t\t\t\t<image class=\"people-img\" src=\"/static/images/people.png\" />\r\n\t\t\t</navigator>\r\n\t\t</view>\r\n\t\t<!-- 目录 -->\r\n\t\t<view class=\"menu_content\">\r\n\t\t\t<view class=\"menu_item\">\r\n\t\t\t\t<image src=\"/static/images/eat.png\" />\r\n\t\t\t\t<text>美食</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"menu_item\">\r\n\t\t\t\t<image src=\"/static/images/ktv.png\" />\r\n\t\t\t\t<text>KTV</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"menu_item\">\r\n\t\t\t\t<image src=\"/static/images/foot.png\" />\r\n\t\t\t\t<text>足疗/按摩</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"menu_item\">\r\n\t\t\t\t<image src=\"/static/images/hotel.png\" />\r\n\t\t\t\t<text>酒店</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"menu_item\">\r\n\t\t\t\t<image src=\"/static/images/improve.png\" />\r\n\t\t\t\t<text>丽人/美发</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 灰线 -->\r\n\t\t<view class=\"line_gray\"></view>\r\n\t\t<!-- \r\n\t\t\tShopList 猜你喜欢\r\n\t\t\t\ttitle 标题,\"猜你喜欢\"\r\n\t\t\t\t:list 商铺列表\r\n\t\t\t\t:loading 数据是否加载中\r\n\t\t -->\r\n\t\t<ShopList\r\n\t\t\ttitle=\"猜你喜欢\"\r\n\t\t\t:list=\"shops\"\r\n\t\t\t:loading=\"loading\"\r\n\t\r\n\t\t></ShopList>\r\n\t\t\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/* 引入ShopList 店铺列表组件 */\r\n\timport ShopList from '../../components/ShopList.vue'\r\n\t\r\n\t\r\n\t/* QQMapWX 引入腾讯地图SDK，qqmap-wx-jssdk.js */\r\n\tconst QQMap=require('../../utils/qqmap-wx-jssdk.js')\r\n\t\r\n\t/**\r\n\t * 实例化腾讯地图 https://lbs.qq.com/dev/console/key/manage\r\n\t * \tkey 秘钥，YACBZ-5LPK6-GOQSO-EP343-7LD4J-SIBLV\r\n\t */\r\n\tconst map=new QQMap({\r\n\t\tkey:'APQBZ-36ZHW-MVMRV-OV5XW-GGTCH-HVFNZ'\r\n\t})\r\n\t\r\n\t\r\n\t/* wx.cloud.database() 获取当前云环境的数据库 */\r\n\tconst db=wx.cloud.database()\r\n\t\r\n\t/* getApp()获取全局变量{globalData} */\r\n\tconst {globalData}=getApp()\r\n\t\r\n\texport default {\r\n\t\t/* 数据\r\n\t\t\taddress 当前地址,默认'加载中……'\r\n\t\t\tshops 店铺列表，默认[]\r\n\t\t\tloading 是否正在加载，默认false\r\n\t\t\tpage 当前页，用于上拉加载，默认0\r\n\t\t */\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\taddress:'加载在……',\r\n\t\t\t\tshops:[],\r\n\t\t\t\tloading:false,\r\n\t\t\t\tpage:0\r\n\t\t\t};\r\n\t\t},\r\n\t\t/* 组件 */\r\n\t\tcomponents: {ShopList},\r\n\t\t/**\r\n\t\t * 页面加载\r\n\t\t * \tgetUserInfo() 尝试使用js 获取用户信息\r\n\t\t * \t\t将获取结果更新到全局\r\n\t\t * \t从本地获取openid\t\t\r\n\t\t * \t\t若openid 不存在\r\n\t\t * \t\t\tgetOpenidByFn()获取openid 并存储到本地\r\n\t\t */\r\n\t\tonLoad() {\r\n\t\t\tthis.getUserInfo()\r\n\t\t\t\t.then(userInfo=>{\r\n\t\t\t\t\tglobalData.userInfo=userInfo\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\tconst openid=uni.getStorageSync('openid');\r\n\t\t\tconsole.log('从本地获取获取openid：',openid);\r\n\t\t\tif(!openid){\r\n\t\t\t\tthis.getOpenidByFn()\r\n\t\t\t\t\t.then(openid=>{\r\n\t\t\t\t\t\tuni.setStorageSync('openid',openid)\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 页面显示 \r\n\t\t * \t获取全局数据里的地址address\r\n\t\t * \t若地址存在\r\n\t\t * \t\t更新address 数据\r\n\t\t * \t\tshops 置空\r\n\t\t * \t\tpage 归零\r\n\t\t * \t\tupdateShops() 更新店铺列表\r\n\t\t * \t若地址不存在\r\n\t\t * \t\tgetLocation() 获取当前位置\r\n\t\t * \t\t\tthen() 解构经纬度latitude,longitude，返回analysis() 反解析经纬度后的地址\r\n\t\t * \t\t\tthen() \r\n\t\t * \t\t\t\t更新address 数据\r\n\t\t * \t\t\t\t将address写入全局\r\n\t\t * \t\t\t\tupdateShops更新店铺列表\r\n\t\t */\r\n\t\tonShow() {\r\n\t\t\tconst {address}=globalData\r\n\t\t\tif(address){\r\n\t\t\t\tthis.address=address\r\n\t\t\t\tthis.shops=[]\r\n\t\t\t\tthis.page=0\r\n\t\t\t\tthis.updateShops()\r\n\t\t\t}else{\r\n\t\t\t\tthis.getLocation()\r\n\t\t\t\t\t.then(data=>this.analysis(data))\r\n\t\t\t\t\t.then(address=>{\r\n\t\t\t\t\t\tthis.address=address\r\n\t\t\t\t\t\tglobalData.address=address\r\n\t\t\t\t\t\tthis.updateShops()\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 上拉加载\r\n\t\t * \tupdateShops更新店铺列表\r\n\t\t */\r\n\t\tonReachBottom() {\r\n\t\t\tthis.updateShops();\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t* 通过js 方法获取用户信息，保存到全局\r\n\t\t\t* \tgetSetting() 获取用户授权\r\n\t\t\t* \t\tauthSetting['scope.userInfo'] 用户信息授权\r\n\t\t\t* \t\t\tuni.getUserInfo() 获取用户信息{userInfo}\r\n\t\t\t*/\r\n\t\t\tgetUserInfo(){\r\n\t\t\t\treturn new Promise(resolve=>{\r\n\t\t\t\t\tuni.getSetting({\r\n\t\t\t\t\t\tsuccess:(res)=>{\r\n\t\t\t\t\t\t\tconsole.log('用户授权信息：',res);\r\n\t\t\t\t\t\t\tif(res.authSetting['scope.userInfo']){\r\n\t\t\t\t\t\t\t\tuni.getUserInfo({\r\n\t\t\t\t\t\t\t\t\tsuccess:({userInfo})=>{\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('用户信息',userInfo);\r\n\t\t\t\t\t\t\t\t\t\tresolve(userInfo)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 通过云函数获取openid，缓存到本地\r\n\t\t\t * \twx.cloud.callFunction({}) 请求云函数\r\n\t\t\t * \t\tname 函数名，login\r\n\t\t\t * \t\tsuccess 成功回调\r\n\t\t\t * \t\tfail 失败回调\r\n\t\t\t */\r\n\t\t\tgetOpenidByFn() {\r\n\t\t\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\t\t  wx.cloud.callFunction({\r\n\t\t\t\t\t  name:'login',\r\n\t\t\t\t\t  success:({result:{openid}})=>{\r\n\t\t\t\t\t\t  console.log('云端请求的openid',openid);\r\n\t\t\t\t\t\t  resolve(openid)\r\n\t\t\t\t\t  }\r\n\t\t\t\t  })\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/* uni.getLocation() 获取当前经纬度 */\r\n\t\t\tgetLocation(){\r\n\t\t\t\treturn new Promise((resolve)=>{\r\n\t\t\t\t\tuni.getLocation({\r\n\t\t\t\t\t\tsuccess:(res)=>{\r\n\t\t\t\t\t\t\tconsole.log('经纬度',res);\r\n\t\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * map.reverseGeocoder({}) 反解析经纬度\r\n\t\t\t * \tlocation{latitude,longitude} 经纬度\r\n\t\t\t * \tsuccess 成功回调\r\n\t\t\t * \t\t获取城市 result.result.address_component.city\r\n\t\t\t */\r\n\t\t\tanalysis({latitude,longitude}){\r\n\t\t\t\treturn new Promise((resolve)=>{\r\n\t\t\t\t\tmap.reverseGeocoder({\r\n\t\t\t\t\t\tlocation:{latitude,longitude},\r\n\t\t\t\t\t\tsuccess:({result:{address_component:{city}}})=>{\r\n\t\t\t\t\t\t\tconsole.log('当前城市',city);\r\n\t\t\t\t\t\t\tresolve(city)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 更新店铺列表\r\n\t\t\t * \tthis.getShops() 获取店铺列表\r\n\t\t\t * \t\tparseShops(res)解析店铺列表\r\n\t\t\t * \t\t若店铺数量不为0：\r\n\t\t\t * \t\t\t将现有店铺列表和新获取的店铺列表合并\r\n\t\t\t * \t\t\tpage++\r\n\t\t\t */\r\n\t\t\tupdateShops(){\r\n\t\t\t\tthis.getShops()\r\n\t\t\t\t\t.then(data=>this.parseShops(data))\r\n\t\t\t\t\t.then(shops=>{\r\n\t\t\t\t\t\tif(shops.length){\r\n\t\t\t\t\t\t\tthis.shops=[...this.shops,...shops]\r\n\t\t\t\t\t\t\tthis.page++\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/* 根据城市名称获取热门店铺 \r\n\t\t\t\tloading true\r\n\t\t\t\tstart 数据搜索的起始位\r\n\t\t\t\tcollection(str) 获取数据集合 favorList\r\n\t\t\t\t\twhere({}) 基于place查询数据\r\n\t\t\t\t\tskip(int) 从哪个索引位置开始查询数据\r\n\t\t\t\t\tlimit(int) 获取多少条记录\r\n\t\t\t\t\tget() 获取所有满足其上游的所有条件的数据，返回Promise 对象\r\n\t\t\t\t\t\tsuccess 返回{data} 数据\r\n\t\t\t\t\t\tcomplete loading false\r\n\t\t\t*/\r\n\t\t\tgetShops(place=this.address){\r\n\t\t\t\tthis.loading=true;\r\n\t\t\t\tconst n=5;\r\n\t\t\t\tconst start=this.page*5;\r\n\t\t\t\treturn new Promise((resolve)=>{\r\n\t\t\t\t\tdb.collection('favorList')\r\n\t\t\t\t\t\t.where({\r\n\t\t\t\t\t\t\tplace:this.address\r\n\t\t\t\t\t\t\t// place:'北京市'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.skip(start)\r\n\t\t\t\t\t\t.limit(n)\r\n\t\t\t\t\t\t.get({\r\n\t\t\t\t\t\t\tsuccess:({data})=>{\r\n\t\t\t\t\t\t\t\tconsole.log('当前城市的店铺集合',data);\r\n\t\t\t\t\t\t\t\tresolve(data)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcomplete:()=>{\r\n\t\t\t\t\t\t\t\tthis.loading=false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/* 对获取的店铺列表的数据进行加工 */\r\n\t\t\tparseShops(data){\r\n\t\t\t\tdata.forEach((item, key) => {\r\n\t\t\t\t\tif(item.label){\r\n\t\t\t\t\t\titem['labelArr'] = item.label.split(\",\").splice(0, 4);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\titem['labelArr'] =null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(item.image_path===null){\r\n\t\t\t\t\t\titem.image_path='mdata/img/404.jpg';\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn data;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.home_container {\r\n\t\twidth: 750upx;\r\n\t\theight: 300upx;\r\n\t\tbackground: red;\r\n\t}\r\n\r\n\t.title_content {\r\n\t\twidth: 750upx;\r\n\t\theight: 80upx;\r\n\t\tbackground: #00acec;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 24upx;\r\n\t\tpadding-top: 24upx;\r\n\t}\r\n\r\n\t.bar_title {\r\n\t\tcolor: white;\r\n\t\tmargin-top: 60upx;\r\n\t\tmargin-left: 34.5upx;\r\n\t\tfont-size: 28upx;\r\n\t}\r\n\r\n\t.area_name {\r\n\t\tfloat: left;\r\n\t\tmargin-left: 36upx;\r\n\t\tmargin-right: 9upx;\r\n\t}\r\n\r\n\t.downIcon {\r\n\t\twidth: 18upx;\r\n\t\theight: 10upx;\r\n\t}\r\n\r\n\t.people {\r\n\t\tfloat: right;\r\n\t\tmargin-right: 28upx;\r\n\t}\r\n\t.people-img {\r\n\t\twidth: 48upx;\r\n\t\theight: 48upx;\r\n\t}\r\n\r\n\t.menu_content {\r\n\t\twidth: 750upx;\r\n\t\theight: 198upx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t}\r\n\t\r\n\t.menu_item {\r\n\t\tflex: 1;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.menu_item image {\r\n\t\twidth: 88upx;\r\n\t\theight: 88upx;\r\n\t\tmargin: 20upx 20upx;\r\n\t}\r\n\r\n\t.menu_item text {\r\n\t\tfont-size: 24upx;\r\n\t}\r\n\r\n\t\r\n</style>\n","import mod from \"-!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuildx\\\\HBuilderX.2.9.8.20201110.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1609071807089\n      var cssReload = require(\"F:/HBuildx/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}