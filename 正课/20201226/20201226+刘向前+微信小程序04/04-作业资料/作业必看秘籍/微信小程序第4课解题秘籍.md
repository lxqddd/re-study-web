# 微信小程序第4课解题秘籍



### 一，项目导入

“12-美食收藏” 导入Hbuilder

“12-美食收藏-云开发”导入微信开发者工具



![image-20201030153340165](images/image-20201030153340165.png)



### 二，配置uni-app

#### 1.uniapp appid

![image-20201030145014856](images/image-20201030145014856.png)



#### 2.微信小程序appid

![image-20201030145122682](images/image-20201030145122682.png)



#### 3.微信开发者工具路径

![image-20201030145157883](images/image-20201030145157883.png)



![image-20201030145218430](images/image-20201030145218430.png)





#### 4.不校验合法域名

![image-20201130100021222](images/image-20201130100021222.png)





### 二，云开发配置



#### 1.建立云环境

![image-20201030145343494](images/image-20201030145343494.png)



#### 2.在云开发平台的数据库中建立favorList 和collect集合



![image-20201030145550162](images/image-20201030145550162.png)



#### 3.在favorList 集合中导入favorList.json 数据

![image-20201030145640896](images/image-20201030145640896.png)



![image-20201031104142995](images/image-20201031104142995.png)





设置数据权限

![540141952](images/540141952.jpg)





#### 4.在云存储上传图片资源

在云存储中建立项目目录mdata

![image-20201030145807258](images/image-20201030145807258.png)



进入mdata 目录建立app和img文件



![image-20201030145847481](images/image-20201030145847481.png)

在img 目录中上传图片文件

![image-20201030150420324](images/image-20201030150420324.png)



再app 目录中上传默认用户头像

![image-20201030150712062](images/image-20201030150712062.png)



#### 5.把我的云函数部署到云端。

大家可以直接建立一个自己的云开发项目，云开发项目要使用自己的环境

![image-20201030152159472](images/image-20201030152159472.png)



把我“12-美食收藏-云开发” 里的两个云函数复制粘贴到自己的项目里。

![image-20201130095047515](images/image-20201130095047515.png)

![image-20201130095311342](images/image-20201130095311342.png)

![image-20201130095513505](images/image-20201130095513505.png)



把两个云函数上传并部署到云端

![image-20201030152121286](images/image-20201030152121286.png)



效果如下：

![image-20201030152237082](images/image-20201030152237082.png)





### 三，配置uniapp 中的配置

#### 1.app.vue 里初始化环境id。

kkb-kn8rp要改成大家自己的云开发环境id。注意：是云开发环境id，不是appid

![image-20201030151416568](images/image-20201030151416568.png)

![image-20201030151549694](images/image-20201030151549694.png)



#### 2-创建QQ地图的秘钥

地址： https://lbs.qq.com/dev/console/key/manage 

![image-20201130093857697](images/image-20201130093857697.png)



![image-20201130094447400](images/image-20201130094447400.png)

这就是QQ地图的秘钥：

![image-20201130094656626](images/image-20201130094656626.png)





#### 3.在实例化QQ地图时，写入QQ地图的秘钥

![image-20201030152429631](images/image-20201030152429631.png)





#### 4.ShopList 里的图片路径要写自己的

![image-20201030152529055](images/image-20201030152529055.png)

![image-20201030152736557](images/image-20201030152736557.png)



其它用到云端图片的地方也是同样道理。